import { askAI } from "@/store";
import { useState } from "react";
import { CACHED_QUERY } from "@/data";
import { Button } from "@/components/ui/button";
import { LoaderIcon, SendHorizonalIcon } from "lucide-react";
import { Textarea } from "@/components/ui/textarea-auto-expand";

export const Search = () => {
  const [search, setSearch] = useState("");

  const ask = askAI();

  return (
    <div className="absolute top-0 left-0 z-50 flex h-svh w-full flex-col items-center bg-black/75">
      <div className="flex flex-1 flex-col items-center justify-center">
        <div className="w-full max-w-2xl space-y-4 p-4">
          <h1 className="pb-2 text-center font-bold text-5xl">
            Green Living Assistant
          </h1>
          <p className="pb-4 text-center">
            Helping you discover sustainable solutions for everyday living
          </p>
          <div className="relative">
            <Textarea
              rows={4}
              autoFocus
              value={search}
              disabled={ask.isPending}
              className="bg-background p-2"
              placeholder="Ask about eco-friendly locations, sustainability tips, or green initiatives..."
              onChange={(e) => setSearch(e.target.value)}
            />
            <Button
              size="sm"
              disabled={ask.isPending}
              onClick={() => ask.mutate({ text: "Search" })}
              className="absolute right-2 bottom-2 h-7 space-x-1 text-xs"
            >
              <span>Search</span>
              {!ask.isPending && <SendHorizonalIcon className="size-3" />}
              {ask.isPending && <LoaderIcon className="size-3 animate-spin" />}
            </Button>
          </div>
          <div className="flex flex-row flex-wrap items-stretch justify-center gap-2">
            {CACHED_QUERY.map((item) => (
              <Button
                size="sm"
                key={item.id}
                variant="outline"
                disabled={ask.isPending}
                className="h-7 space-x-1 rounded-full text-xs"
                onClick={() => {
                  setSearch(item.text);

                  ask.mutate({ cachedQueryId: item.id, text: item.text });
                }}
              >
                {item.text}
              </Button>
            ))}
          </div>
        </div>
      </div>
      <div className="w-full space-y-2 p-4 text-center text-muted-foreground text-sm">
        <div>Powered By</div>
        <div className="flex flex-row items-center justify-center gap-4">
          <a href="https://nvidia.com" target="_blank" rel="noreferrer">
            <svg
              viewBox="0 0 24 24"
              className="h-12 fill-foreground"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title>NVIDIA</title>
              <path d="M8.948 8.798v-1.43a6.7 6.7 0 0 1 .424-.018c3.922-.124 6.493 3.374 6.493 3.374s-2.774 3.851-5.75 3.851c-.398 0-.787-.062-1.158-.185v-4.346c1.528.185 1.837.857 2.747 2.385l2.04-1.714s-1.492-1.952-4-1.952a6.016 6.016 0 0 0-.796.035m0-4.735v2.138l.424-.027c5.45-.185 9.01 4.47 9.01 4.47s-4.08 4.964-8.33 4.964c-.37 0-.733-.035-1.095-.097v1.325c.3.035.61.062.91.062 3.957 0 6.82-2.023 9.593-4.408.459.371 2.34 1.263 2.73 1.652-2.633 2.208-8.772 3.984-12.253 3.984-.335 0-.653-.018-.971-.053v1.864H24V4.063zm0 10.326v1.131c-3.657-.654-4.673-4.46-4.673-4.46s1.758-1.944 4.673-2.262v1.237H8.94c-1.528-.186-2.73 1.245-2.73 1.245s.68 2.412 2.739 3.11M2.456 10.9s2.164-3.197 6.5-3.533V6.201C4.153 6.59 0 10.653 0 10.653s2.35 6.802 8.948 7.42v-1.237c-4.84-.6-6.492-5.936-6.492-5.936z" />
            </svg>
          </a>
          <a href="https://arangodb.com" target="_blank" rel="noreferrer">
            <svg
              viewBox="0 0 24 24"
              className="h-12 fill-foreground"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title>ArangoDB</title>
              <path d="M13.885 3.75c-.32.007-.536.032-.61.041-.878.106-2.81.49-4.466 2.088-.921.89-1.501 2.153-1.783 2.826.251-.072.502-.13.75-.164.94-.131 1.8-.013 2.431.219.89-.158 1.474-.228 1.782-.227.953.004 2.003-.008 2.775.65.208.178.82.542.725 1.515-.084.867-.474 1.933-1.428 2.982-.574.632-1.686 1.444-3.059 2.15-.995.511-2.412 1.313-4.469 1.426-.331.019-.708.041-1.105.04-1.012-.004-2.48-.138-3.545-1.249-.221-.231-1.31-1.458-1.002-2.93.248-1.185 1.229-1.798 2.016-2.292.447-.281 1.05-.512 1.861-.754.585-.63 1.274-1.017 1.975-1.262-1.394.312-2.784.652-3.788 1.15-1.15.557-2.236 1.082-2.707 2.237-.287.707-.263 1.42-.191 1.892 0 0 .31 3.096 2.441 4.674 1.784 1.323 4.413 1.812 6.374 1.276 1.543-.294 3.015-1.738 4.24-3.004l.006.004c.392.186 1.295.584 2.027.963 1.692.873 2.864 1.054 3.47 1.16 1.317.23 3.368-.292 4.341-1.383.932-1.045 1.203-2.454.98-3.711-.067-.386-.066-1.073-.349-2.016-.222-.737-.333-1.104-.494-1.496-.31-.758-.705-1.373-1.295-2.137-1.382-1.784-2.072-2.679-3.2-3.39-1.834-1.16-3.74-1.297-4.703-1.278zm.713 1.135c.814.033 2.014.046 3.051.725.603.397 1.182.68 2.338 2.21 1.56 2.069 1.711 2.301 2.293 3.405.443.84.822 2.55.65 3.885-.05.387-.09 1.209-.95 2.021-1.157 1.093-3.13.97-3.337.946-.629-.077-1.113-.371-2.582-.934l-1.816-.744c-.121-.048-.245-.115-.37-.18.417-.499 1.182-1.488 1.497-2.111.231-.466.385-.985.488-1.37.078-.308.195-.765.244-1.204.025-.229.045-.463.049-.663.004-.207-.001-.244-.01-.402a4.156 4.156 0 0 0-.201-.926 2.408 2.408 0 0 0-.457-.748 2.623 2.623 0 0 0-.51-.367c-.208-.113-.474-.216-.646-.283-.32-.125-.585-.196-1.067-.256a5.006 5.006 0 0 0-.451-.016c-.547.005-1.274.08-2.338.237-.68.095-1.357.208-2.024.334l.002-.006c.69-1.402 1.67-2.392 3.35-2.983 1.075-.377 2.198-.595 2.797-.57zm.272 2.566a2.08 2.08 0 0 0-.721.112c.378.093.743.284 1.064.426.255.138.49.313.633.462.249.261.46.616.569.93.099.29.206.71.226 1.06.009.15.016.22.012.438a8.02 8.02 0 0 1-.053.711c-.054.488-.178.965-.256 1.272a7.829 7.829 0 0 1-.383 1.144c.239.004.47-.002.602-.025.937-.164 1.561-1.126 1.752-1.904.268-1.102-.285-2.02-.654-2.633-.349-.577-.963-1.384-2.073-1.834a2.09 2.09 0 0 0-.718-.159zM7.844 9.035a4.64 4.64 0 0 0-1.511.457c-.53.254-.99.648-1.573 1.335-.65.815-1.112 2.387-.76 2.81.18.218.275.24.34.283.901.436 1.724 1.035 3.068 1.114h1.118c.234.002.545-.05.632-.059 1.547-.254 3.605-1.349 3.526-2.88-.03-.573-.683-1.512-1.127-1.935-.431-.41-1.147-.788-1.454-.917-.266-.131-.576-.167-.888-.213-.47-.078-.972-.048-1.371.005z" />
            </svg>
          </a>
          <a href="https://networkx.org/" target="_blank" rel="noreferrer">
            <svg
              viewBox="0 0 128 128"
              xmlns="http://www.w3.org/2000/svg"
              className="h-12 fill-foreground"
            >
              <path d="M78.075 69.24c9.505-3.51 14.51-13.887 11.182-23.173C85.93 36.78 75.526 32.098 66.022 35.61c-9.504 3.512-14.51 13.886-11.181 23.173 3.328 9.287 13.732 13.968 23.234 10.457z" />
              <path d="M74.15 21.646a31.87 31.87 0 00-12.33 1.965c-16.292 6.02-24.966 23.912-19.213 39.963 5.753 16.051 23.804 24.134 40.096 18.114v-.003l.002-.001c16.29-6.02 24.964-23.908 19.211-39.96C97.602 29.687 86.37 22.133 74.15 21.647zm-.24 6.514c9.68.35 18.446 6.304 21.84 15.776 4.527 12.63-2.258 26.78-15.316 31.605v.002h-.002c-13.06 4.824-27.133-1.552-31.659-14.18-4.526-12.629 2.26-26.781 15.319-31.607a25.617 25.617 0 019.818-1.596zm18.162 63.276a17.792 17.792 0 00-6.892 1.095c-9.1 3.362-13.962 13.373-10.74 22.36 3.22 8.986 13.338 13.507 22.439 10.144 9.1-3.362 13.96-13.37 10.738-22.357-2.414-6.74-8.71-10.968-15.545-11.242zm-.172 4.656c5.02.177 9.552 3.261 11.309 8.166 2.345 6.54-1.164 13.878-7.953 16.387-6.791 2.509-14.065-.795-16.408-7.334-2.345-6.541 1.165-13.88 7.955-16.387a13.326 13.326 0 015.097-.832zM22.566 58.865a12.746 12.746 0 00-4.937.785c-6.518 2.41-9.999 9.578-7.692 16.014 2.308 6.436 9.555 9.679 16.073 7.27 6.517-2.41 9.998-9.578 7.691-16.014-1.73-4.827-6.238-7.858-11.135-8.055zm-.123 3.336c3.596.127 6.841 2.337 8.1 5.85 1.679 4.684-.835 9.939-5.697 11.736-4.862 1.797-10.073-.57-11.752-5.254-1.68-4.684.835-9.939 5.697-11.736a9.549 9.549 0 013.652-.596z" />
              <path d="M42.54 60.773l-11.75 4.344 1.86 5.033 11.75-4.34zm42.542 16.543l-7.053 2.528 5.746 16.031 7.053-2.527zm25.965-74.795a12.89 12.89 0 00-9.076 3.317c-5.16 4.653-5.65 12.575-1.02 17.607 4.632 5.033 12.6 5.281 17.758.627 5.159-4.652 5.651-12.573 1.02-17.605-2.316-2.516-5.467-3.836-8.682-3.946zm-.131 3.338c2.358.078 4.658 1.048 6.344 2.88 3.372 3.663 3.05 9.373-.797 12.843-3.846 3.47-9.671 3.255-13.043-.408-3.372-3.664-3.052-9.373.797-12.844a9.525 9.525 0 016.699-2.47z" />
              <path d="M100.705 20.01L91.4 28.39l3.592 3.987 9.303-8.379zM62.568 95.434c-4.42-.722-8.685 2.24-9.527 6.627-.842 4.385 2.109 8.583 6.53 9.304 4.418.721 8.681-2.239 9.525-6.625v-.002c.84-4.384-2.109-8.583-6.528-9.304zm-.351 2.148h.002c3.263.534 5.36 3.522 4.74 6.746-.62 3.227-3.775 5.422-7.039 4.889-3.266-.533-5.362-3.521-4.742-6.746.62-3.227 3.774-5.42 7.039-4.889z" />
              <path d="M68.037 102.771l-.56 3.438 7.937 1.293.56-3.438zM13.723 38.945a8.262 8.262 0 00-3.205.498c-4.236 1.549-6.512 6.194-5.03 10.377 1.483 4.183 6.179 6.302 10.414 4.752 4.233-1.548 6.507-6.191 5.026-10.373l.002-.002c-1.112-3.136-4.03-5.113-7.207-5.252zm-.088 2.164c2.332.09 4.434 1.53 5.244 3.813l-.002.002c1.08 3.044-.564 6.448-3.723 7.603-3.16 1.157-6.536-.39-7.615-3.435-1.08-3.045.564-6.448 3.725-7.604h.002a6.182 6.182 0 012.369-.379z" />
              <path d="M17.078 52.713l-3.281 1.164 2.644 7.459 3.282-1.162zm98.07 9.139c-3.174-.07-6.27 1.707-7.726 4.738-1.966 4.02-.2 8.92 3.875 10.703 4.068 1.814 8.922.004 10.861-4.035 1.965-4.016.205-8.913-3.865-10.7h-.004a8.118 8.118 0 00-3.14-.706zm-.056 2.175a5.97 5.97 0 012.312.518l.008.002c2.95 1.29 4.23 4.822 2.791 7.758l-.004.008c-1.436 2.994-5.035 4.328-8.023 2.992l-.008-.004c-2.95-1.29-4.229-4.822-2.791-7.758l.004-.008c1.078-2.246 3.37-3.556 5.71-3.508z" />
              <path d="M101.904 61.837l-1.922 3.178 7.29 3.26 1.421-3.178z" />
              <path d="M93.914 116.833c4.549-1.681 6.945-6.648 5.351-11.092-1.594-4.446-6.572-6.686-11.121-5.005-4.549 1.68-6.945 6.647-5.353 11.091 1.594 4.446 6.574 6.686 11.121 5.006zM23.918 77.15c3.312-1.224 5.054-4.837 3.895-8.072-1.16-3.234-4.783-4.866-8.092-3.642-3.312 1.224-5.055 4.837-3.896 8.071 1.16 3.236 4.783 4.866 8.093 3.643zM112.44 20.8c3.31-1.223 5.054-4.837 3.894-8.07-1.16-3.236-4.782-4.866-8.092-3.643-3.311 1.223-5.054 4.837-3.896 8.072 1.16 3.235 4.783 4.866 8.094 3.642z" />
              <path d="M109.979 76.111l-10.354 18 3.018 1.737 10.353-18z" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  );
};
